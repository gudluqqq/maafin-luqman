<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Permintaan Maaf Cia</title>
  <style>
    /* Reset & Center */
    * {
      box-sizing: border-box;
    }
    body {
      background: #fff0f5;
      font-family: "Arial", sans-serif;
      margin: 0;
      padding: 20px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #333;
    }
    button {
      background-color: #ff69b4;
      border: none;
      color: white;
      padding: 12px 25px;
      margin-top: 20px;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #ff1493;
    }
    h2 {
      font-size: 26px;
      margin-bottom: 20px;
    }
    /* Popup overlay */
    #popupOverlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }
    #popupBox {
      background: white;
      padding: 25px;
      border-radius: 15px;
      max-width: 300px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }
    #popupBox p {
      font-size: 18px;
      margin-bottom: 20px;
    }
    #popupBox button {
      margin: 0 10px;
      width: 80px;
    }
    /* Slider styling */
    #sliderSection {
      display: none;
      width: 100%;
      max-width: 320px;
    }
    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      height: 15px;
      border-radius: 10px;
      background: linear-gradient(to right, pink 0%, pink 100%);
      outline: none;
      margin-top: 10px;
      transition: background 0.3s ease-in-out;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid red;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    input[type=range]::-moz-range-thumb {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid red;
      cursor: pointer;
    }
    .text {
      margin-top: 12px;
      font-size: 20px;
      font-weight: 600;
      min-height: 28px;
      color: #b22222;
    }
    /* Final apology */
    #finalSection {
      display: none;
      max-width: 350px;
      font-size: 18px;
      line-height: 1.4;
      color: #444;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <!-- Step 1 -->
  <div id="step1">
    <h2>Halo Cia cantik</h2>
    <button id="next1">Next</button>
  </div>

  <!-- Step 2 popup -->
  <div id="popupOverlay">
    <div id="popupBox">
      <p id="popupQuestion">Apa kamu Cia beneran?</p>
      <button id="btnYes">Ya</button>
      <button id="btnNo">Tidak</button>
    </div>
  </div>

  <!-- Mang ea? -->
  <div id="mangEa" style="display:none;">
    <h2>Mang ea?</h2>
    <button id="btnNgambek">Ngambek</button>
  </div>

  <!-- Step 3 slider -->
  <div id="sliderSection">
    <h2>Seberapa marah si sm Luqman?</h2>
    <input type="range" id="angerSlider" min="0" max="100" value="0" oninput="updateSliderColor()" />
    <div class="text" id="angerText">hore ga marah :)</div>
    <button id="next3">Next</button>
  </div>

  <!-- Step 4 final apology -->
  <div id="finalSection">
    <p>
      Cia aku minta maaf aku ga bermaksud nyakitin hati moengil kamu dengan bercerita masa lalu. Yang aku tau sekarang, kamu paling best dari segala yang aku punya.<br/><br/>
      Aku gamau kamu sedih dan aku concern sama perasaan kamu yang kesel sama aku. Aku gamau kamu ngambekkkk ðŸ˜¢
    </p>
    <audio id="sadSong" src="https://www.bensound.com/bensound-music/bensound-sadness.mp3" preload="auto"></audio>
  </div>

  <script>
    // Elements
    const step1 = document.getElementById("step1");
    const popupOverlay = document.getElementById("popupOverlay");
    const popupQuestion = document.getElementById("popupQuestion");
    const btnYes = document.getElementById("btnYes");
    const btnNo = document.getElementById("btnNo");
    const mangEa = document.getElementById("mangEa");
    const btnNgambek = document.getElementById("btnNgambek");
    const sliderSection = document.getElementById("sliderSection");
    const angerSlider = document.getElementById("angerSlider");
    const angerText = document.getElementById("angerText");
    const next3 = document.getElementById("next3");
    const finalSection = document.getElementById("finalSection");
    const sadSong = document.getElementById("sadSong");

    // Step 1 Next
    document.getElementById("next1").onclick = () => {
      step1.style.display = "none";
      popupOverlay.style.display = "flex";
    };

    // Popup buttons
    btnYes.onclick = () => {
      popupOverlay.style.display = "none";
      sliderSection.style.display = "block";
      updateSliderColor();
    };

    btnNo.onclick = () => {
      popupQuestion.textContent = "Mang ea?";
      btnYes.style.display = "none";
      btnNo.textContent = "Ngambek";
    };

    btnNo.onclick = () => {
      popupQuestion.textContent = "Mang ea?";
      btnYes.style.display = "none";
      btnNo.textContent = "Ngambek";
    };

    btnNo.onclick = () => {
      // Hide popup, show mangEa section
      popupOverlay.style.display = "none";
      mangEa.style.display = "block";
    };

    btnNgambek.onclick = () => {
      mangEa.style.display = "none";
      sliderSection.style.display = "block";
      updateSliderColor();
    };

    // Update slider color and text
    function updateSliderColor() {
      const value = parseInt(angerSlider.value);
      let text = "";

      if (value <= 10) {
        text = "hore ga marah :)";
      } else if (value <= 20) {
        text = "ihhh marah dikit, its okei ðŸ˜…";
      } else if (value <= 50) {
        text = "marah banget keknya ðŸ˜¢";
      } else if (value <= 80) {
        text = "tuhh marah kannnn ðŸ˜«";
      } else {
        text = "huhuhuh marah banget sedih aku ðŸ˜­";
      }

      angerText.textContent = text;

      // Dynamic slider gradient pink -> red
      const percent = value;
      const bg = `linear-gradient(to right, pink 0%, red ${percent}%, #ccc ${percent}%, #ccc 100%)`;
      angerSlider.style.background = bg;
    }

    // Next from slider to final apology
    next3.onclick = () => {
      sliderSection.style.display = "none";
      finalSection.style.display = "block";
      sadSong.play();
    };
  </script>
</body>
</html>
